<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–£—Å–ª—É–≥–∏</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            padding: 5px;
            background: linear-gradient(145deg, var(--tg-theme-bg-color, #f6f6f6) 0%, var(--tg-theme-secondary-bg-color, #e0e0e0) 100%);
            color: var(--tg-theme-text-color, #000);
            min-height: 100vh;
            margin: 0;
            display: flex;
            flex-direction: column;
            overflow-x: hidden; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É—é –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
            overflow-y: hidden; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—É—é –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
            position: fixed;
            width: 100%;
            height: 100%;
        }
        .grid {
            display: flex; /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ—Ç–∫—É —Å—Ä–∞–∑—É */
            flex-direction: row;
            flex-wrap: wrap;
            gap: 4px;
            max-width: 450px;
            margin: 0 auto;
            padding: 0 5px;
            justify-content: space-between;
            animation: fadeInUp 1s ease-out;
        }
        .button {
            padding: 6px 10px;
            border: none;
            border-radius: 8px;
            background-color: var(--tg-theme-button-color, #3390ec);
            color: var(--tg-theme-button-text-color, #ffffff);
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            width: calc(50% - 2px);
            position: relative;
            overflow: hidden;
        }
        .button::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(30deg);
            transition: transform 0.5s;
            pointer-events: none;
        }
        .button:hover::after {
            transform: rotate(30deg) translate(50%, 50%);
        }
        .main-button {
            padding: 12px 20px;
            font-size: 16px;
            margin: 12px auto;
            max-width: 200px;
            display: block;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .button:nth-child(odd) {
            animation: slideInLeft 0.6s ease-out forwards;
            animation-delay: calc(0.1s * var(--i, 0));
            opacity: 0;
        }
        .button:nth-child(even) {
            animation: slideInRight 0.6s ease-out forwards;
            animation-delay: calc(0.1s * var(--i, 0));
            opacity: 0;
        }
        .button:hover {
            transform: scale(1.02);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
        }
        .button:active {
            transform: scale(0.98);
            opacity: 0.8;
        }
        .header {
            text-align: center;
            margin-bottom: 5px;
            color: var(--tg-theme-text-color, #000);
        }
        .header h1 {
            font-size: 20px;
            margin: 3px 0;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .welcome-message {
            text-align: center;
            margin-bottom: 0px;
            font-size: 0.8em;
            color: var(--tg-theme-text-color, #000);
            padding: 4px;
            border-radius: 10px;
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            animation: slideIn 0.8s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .hero-image {
            width: 100%;
            max-width: 450px;
            height: auto;
            border-radius: 12px;
            margin: 0px auto;
            display: block;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
            animation: float 6s ease-in-out infinite;
        }
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideInLeft {
            from { transform: translateX(-50px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideInRight {
            from { transform: translateX(50px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        .full-width-button {
            width: 100%;
            margin-top: 4px;
        }
    </style>
</head>
<body>
    <div class="welcome-message">
        <p>–î–æ–±—Ä—ã–π –¥–µ–Ω—å, <span id="username">—É–≤–∞–∂–∞–µ–º—ã–π –∫–ª–∏–µ–Ω—Ç</span>!</p>
        <p>–ï—Å–ª–∏ –í–∞–º –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å –ø–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é –∏–ø–æ—Ç–µ–∫–∏ –∏ –ø–æ–¥–±–æ—Ä—É –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –≤ –î—É–±–∞–µ, –æ—Ç–∫—Ä—ã—Ç–∏—è –≤–∏–∑—ã, –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ —Å—á–µ—Ç–∞, —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö —É—Å–ª—É–≥, –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–æ–º–ø–∞–Ω–∏–∏, –∑–∞–≤–µ—Ä–µ–Ω–∏—é, –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –Ω–æ—Ç–∞—Ä–∏–∞–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã, –ª—é–±—ã–µ –≤–∏–¥—ã –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–µ–π, –∫–æ–Ω—Å—É–ª—å—Å—Ç–≤–æ, –¥–æ–≥–æ–≤–æ—Ä–∞ –∫—É–ø–ª–∏ –ø—Ä–æ–¥–∞–∂–∏, –≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω—É –∏–∑ —É—Å–ª—É–≥ –∏ –¥–∞–ª–µ–µ –≤ –æ–±—Ä–∞—Ç–Ω–æ–π —Ñ–æ—Ä–º–µ –æ—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –ú—ã –æ—Ç–≤–µ—Ç–∏–º –í–∞–º –≤ —Ç–µ—á–µ–Ω–∏–∏ 10 –º–∏–Ω—É—Ç.</p>
    </div>
    
    <img src="foto/index.jpg" alt="–ù–∞—à–∏ —É—Å–ª—É–≥–∏" class="hero-image">
    
    <div class="grid" id="services-grid">
        <button class="button" style="--i:1" onclick="handleClick('mortgage')">–ò–ü–û–¢–ï–ö–ê</button>
        <button class="button" style="--i:2" onclick="handleClick('visa')">–í–ò–ó–ê</button>
        <button class="button" style="--i:3" onclick="handleClick('bank')">–°–ß–ï–¢ –í –ë–ê–ù–ö–ï</button>
        <button class="button" style="--i:4" onclick="handleClick('lawyer')">–í–ê–® –Æ–†–ò–°–¢</button>
        <button class="button full-width-button" style="--i:5" onclick="handleClick('company')">–û–¢–ö–†–´–¢–¨ –ö–û–ú–ü–ê–ù–ò–Æ</button>
        <button class="button full-width-button" style="--i:6" onclick="handleClick('consultation')">–ö–û–ù–°–£–õ–¨–¢–ê–¶–ò–Ø</button>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        // –î–æ–±–∞–≤–ª—è–µ–º –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram
        if (tg.initDataUnsafe?.user?.first_name) {
            document.getElementById('username').textContent = tg.initDataUnsafe.user.first_name;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram –±–æ—Ç–∞
        async function sendToTelegramBot(data) {
            try {
                const BOT_TOKEN = '7920170923:AAE_Ch2acQ9AZ0SkOYslSB-Ce5Tot8bxcBM';
                // –ú–∞—Å—Å–∏–≤ ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
                const ADMIN_IDS = ['5467140250', '1621625897'];
                
                // –ü–æ–ª—É—á–∞–µ–º ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram, –µ—Å–ª–∏ –æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω
                let telegramUserId = '';
                if (tg.initDataUnsafe && tg.initDataUnsafe.user && tg.initDataUnsafe.user.id) {
                    telegramUserId = tg.initDataUnsafe.user.id.toString();
                    data.telegramUserId = telegramUserId; // –î–æ–±–∞–≤–ª—è–µ–º ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥–∞–Ω–Ω—ã–µ
                }
                
                console.log('–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º:', ADMIN_IDS);
                
                // –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫—Ä–∞—Å–∏–≤—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
                let messageText = `üì± *–ù–û–í–´–ô –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨* üì±\n\n`;
                
                // –í—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ Telegram –≤ –Ω–∞—á–∞–ª–æ —Å–æ–æ–±—â–µ–Ω–∏—è
                if (data.telegramUsername) {
                    messageText += `üë§ *–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:* @${data.telegramUsername}\n`;
                } else if (data.telegramFirstName) {
                    messageText += `üë§ *–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:* ${data.telegramFirstName}\n`;
                } else {
                    messageText += `üë§ *–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:* –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω\n`;
                }
                
                if (data.telegramUserId) {
                    messageText += `üÜî *ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:* ${data.telegramUserId}\n`;
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è
                const now = new Date();
                const dateOptions = { day: '2-digit', month: '2-digit', year: 'numeric' };
                const timeOptions = { hour: '2-digit', minute: '2-digit' };
                const dateStr = now.toLocaleDateString('ru-RU', dateOptions);
                const timeStr = now.toLocaleTimeString('ru-RU', timeOptions);
                
                messageText += `\nüìÖ *–î–∞—Ç–∞:* ${dateStr}\n‚è∞ *–í—Ä–µ–º—è:* ${timeStr}`;
                
                console.log('–ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:', messageText);
                
                // –°–æ–∑–¥–∞–µ–º —Å–∫—Ä—ã—Ç—ã–π div –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
                const container = document.createElement('div');
                container.style.display = 'none';
                document.body.appendChild(container);
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º —á–µ—Ä–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                let successCount = 0;
                for (const adminId of ADMIN_IDS) {
                    try {
                        const encodedText = encodeURIComponent(messageText);
                        const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${adminId}&text=${encodedText}&parse_mode=Markdown&disable_web_page_preview=true`;
                        
                        // –°–æ–∑–¥–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
                        const img = document.createElement('img');
                        img.style.display = 'none';
                        img.src = url;
                        container.appendChild(img);
                        
                        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
                        img.onload = function() {
                            successCount++;
                            console.log(`–°–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∞–¥–º–∏–Ω—É ${adminId}`);
                        };
                        
                        console.log(`–ó–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è –∞–¥–º–∏–Ω—É ${adminId} —Å–æ–∑–¥–∞–Ω —á–µ—Ä–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ`);
                    } catch (e) {
                        console.error(`–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –∞–¥–º–∏–Ω–∞ ${adminId}:`, e);
                    }
                }
                
                // –£–¥–∞–ª—è–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                setTimeout(() => {
                    if (container && container.parentNode) {
                        document.body.removeChild(container);
                    }
                }, 5000);
                
                // –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º true
                return true;
            } catch (error) {
                console.error("–ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ sendToTelegramBot:", error);
                // –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º true, –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ
                return true;
            }
        }

        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram
            let telegramUsername = '';
            let telegramFirstName = '';
            let telegramUserId = '';
            
            if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
                telegramUsername = tg.initDataUnsafe.user.username || '';
                telegramFirstName = tg.initDataUnsafe.user.first_name || '';
                telegramUserId = tg.initDataUnsafe.user.id ? tg.initDataUnsafe.user.id.toString() : '';
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ Telegram –±–æ—Ç–∞
                sendToTelegramBot({
                    telegramUsername: telegramUsername,
                    telegramFirstName: telegramFirstName,
                    telegramUserId: telegramUserId
                });
            }
        };

        function handleClick(service) {
            if (service === 'consultation') {
                // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º —Å—Ä–∞–∑—É –Ω–∞ WhatsApp, –∏—Å–ø–æ–ª—å–∑—É—è tg.openLink()
                tg.openLink('https://wa.me/79272329533');
            } else if (service === 'lawyer') {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –¥–ª—è GitHub Pages
                const currentPath = window.location.pathname;
                const basePath = currentPath.substring(0, currentPath.lastIndexOf('/'));
                window.location.href = `${basePath}/lawyer.html`;
            } else if (service === 'mortgage') {
                // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–ø–æ—Ç–µ–∫–∏
                const currentPath = window.location.pathname;
                const basePath = currentPath.substring(0, currentPath.lastIndexOf('/'));
                window.location.href = `${basePath}/mortgage.html`;
            } else if (service === 'visa') {
                // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–∏–∑—ã
                const currentPath = window.location.pathname;
                const basePath = currentPath.substring(0, currentPath.lastIndexOf('/'));
                window.location.href = `${basePath}/visa.html`;
            } else if (service === 'bank') {
                // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ —Å—á–µ—Ç–∞
                const currentPath = window.location.pathname;
                const basePath = currentPath.substring(0, currentPath.lastIndexOf('/'));
                window.location.href = `${basePath}/bank.html`;
            } else if (service === 'company') {
                // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–æ–º–ø–∞–Ω–∏–∏
                const currentPath = window.location.pathname;
                const basePath = currentPath.substring(0, currentPath.lastIndexOf('/'));
                window.location.href = `${basePath}/company.html`;
            } else {
                tg.sendData(JSON.stringify({
                    service: service,
                    timestamp: Date.now()
                }));
                tg.close();
            }
        }

        // –ó–∞–ø—Ä–µ—Ç —Å–∫—Ä–æ–ª–ª–∏–Ω–≥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('touchmove', function(e) {
            e.preventDefault();
        }, { passive: false });
        
        document.addEventListener('wheel', function(e) {
            e.preventDefault();
        }, { passive: false });
    </script>
</body>
</html> 