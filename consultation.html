<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            padding: 5px;
            background: linear-gradient(145deg, var(--tg-theme-bg-color, #f6f6f6) 0%, var(--tg-theme-secondary-bg-color, #e0e0e0) 100%);
            color: var(--tg-theme-text-color, #000);
            min-height: 100vh;
            margin: 0;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .container {
            max-width: 450px;
            margin: 0 auto;
            padding: 0 5px;
            padding-bottom: 5px;
            display: flex;
            flex-direction: column;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
            animation: fadeInUp 0.8s ease-out forwards;
            opacity: 0;
            margin-bottom: 4px;
        }
        .header {
            text-align: center;
            margin-bottom: 5px;
            animation: slideIn 0.8s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .header h1 {
            font-size: 22px;
            margin: 0px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--tg-theme-text-color, #000);
        }
        .info-text {
            font-size: 16px;
            line-height: 1.4;
            margin-bottom: 0px;
            background: rgba(255, 255, 255, 0.1);
            padding: 4px;
            border-radius: 8px;
            backdrop-filter: blur(5px);
            animation: fadeInUp 0.8s ease-out;
            flex: 0 0 auto;
        }
        .form-container {
            display: flex;
            flex-direction: column;
            margin-bottom: 0px;
        }
        .form-group {
            margin-bottom: 0px;
            animation: fadeInUp 0.8s ease-out forwards;
            opacity: 0;
        }
        .form-group:nth-child(1) { animation-delay: 0.1s; }
        .form-group:nth-child(2) { animation-delay: 0.2s; }
        .form-group:nth-child(3) { animation-delay: 0.3s; }
        
        @keyframes fadeInUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .form-group label {
            display: block;
            margin-bottom: 2px;
            font-size: 16px;
            color: var(--tg-theme-text-color, #000);
        }
        .form-control {
            width: 100%;
            padding: 6px;
            border: 1px solid var(--tg-theme-hint-color, #999);
            border-radius: 6px;
            background-color: var(--tg-theme-bg-color, #fff);
            color: var(--tg-theme-text-color, #000);
            font-size: 16px;
        }
        .form-input::placeholder {
            color: #666666;
        }
        .form-input:focus {
            color: #000000;
            outline: none;
            border-color: var(--tg-theme-button-color, #3390ec);
        }
        .form-textarea {
            width: 100%;
            padding: 6px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            font-size: 14px;
            background-color: rgba(255, 255, 255, 0.8);
            color: #000000 !important;
            box-sizing: border-box;
            min-height: 60px;
            resize: vertical;
        }
        .form-textarea::placeholder {
            color: #666666;
        }
        .form-textarea:focus {
            color: #000000;
            outline: none;
            border-color: var(--tg-theme-button-color, #3390ec);
        }
        .button-container {
            margin-top: 0px;
            flex: 0 0 auto;
        }
        .button {
            display: block;
            width: 100%;
            padding: 6px;
            margin-bottom: 0px;
            background-color: var(--tg-theme-button-color, #3390ec);
            color: var(--tg-theme-button-text-color, #ffffff);
            border: none;
            border-radius: 6px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }
        .button::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(30deg);
            transition: transform 0.5s;
            pointer-events: none;
        }
        .button:hover::after {
            transform: rotate(30deg) translate(50%, 50%);
        }
        .button:hover {
            transform: scale(1.02);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
        }
        .button:active {
            transform: scale(0.98);
            opacity: 0.8;
        }
        .back-button {
            background-color: transparent;
            color: var(--tg-theme-button-color, #3390ec);
            border: 1px solid var(--tg-theme-button-color, #3390ec);
            margin-top: 0px;
            animation: slideInRight 0.6s ease-out forwards;
            animation-delay: 0.1s;
        }
        @keyframes slideInLeft {
            from { transform: translateX(-50px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideInRight {
            from { transform: translateX(50px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        .contact-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 4px;
        }
        
        .contact-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 6px;
            border-radius: 8px;
            background-color: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            width: 30%;
        }
        
        .contact-button.active {
            background-color: rgba(var(--tg-theme-button-color-rgb, 51, 144, 236), 0.2);
            border-color: var(--tg-theme-button-color, #3390ec);
        }
        
        .contact-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
        }
        
        .contact-icon {
            font-size: 20px;
            margin-bottom: 0px;
        }
        
        .contact-icon img {
            width: 20px;
            height: 20px;
        }
        
        .contact-label {
            font-size: 11px;
            text-align: center;
        }
        
        .country-flag {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 18px;
        }
        
        .phone-input-container {
            position: relative;
        }
        
        .phone-input {
            padding-left: 35px !important;
        }
        
        .required-field::after {
            content: '*';
            color: red;
            margin-left: 3px;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π */
        .custom-alert {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background-color: var(--tg-theme-bg-color, #ffffff);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            max-width: 85%;
            text-align: center;
            animation: zoomIn 0.3s ease-out forwards;
            display: none;
            opacity: 0;
        }
        
        .custom-alert-icon {
            font-size: 48px;
            margin-bottom: 15px;
            display: block;
        }
        
        .custom-alert-content {
            margin-bottom: 20px;
            font-size: 16px;
            color: var(--tg-theme-text-color, #000);
            line-height: 1.4;
        }
        
        .custom-alert-button {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            background-color: var(--tg-theme-button-color, #3390ec);
            color: var(--tg-theme-button-text-color, #ffffff);
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            width: 100%;
            max-width: 200px;
        }
        
        .custom-alert-button:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .custom-alert-button:active {
            background-color: var(--tg-theme-button-color, #3390ec);
            color: var(--tg-theme-button-text-color, #fff);
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(3px);
            z-index: 999;
            display: none;
            opacity: 0;
            animation: fadeIn 0.3s ease-out forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes zoomIn {
            from { 
                opacity: 0; 
                transform: translate(-50%, -50%) scale(0.8);
            }
            to { 
                opacity: 1; 
                transform: translate(-50%, -50%) scale(1);
            }
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏ */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</h1>
        </div>
        
        <div class="info-text">
            –û—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à–∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –º—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–≤—è–∂–µ–º—Å—è —Å –í–∞–º–∏
        </div>
        
        <div class="form-container">
            <div class="form-group">
                <label class="form-label required-field" for="name">–í–∞—à–µ –∏–º—è</label>
                <input type="text" id="name" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" onfocus="scrollToField(this)">
            </div>
            
            <div class="form-group">
                <label class="form-label required-field" for="whatsapp">WhatsApp</label>
                <div id="whatsapp-container" class="phone-input-container">
                    <div id="whatsapp-flag" class="country-flag"></div>
                    <input type="tel" id="whatsapp" class="form-input phone-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä WhatsApp" oninput="detectCountry('whatsapp')" onfocus="scrollToField(this)">
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label required-field" for="email-contact">Email</label>
                <input type="email" id="email-contact" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ email –¥–ª—è —Å–≤—è–∑–∏" onfocus="scrollToField(this)">
            </div>
            
            <div class="form-group">
                <label class="form-label" for="message">–í–∞—à –≤–æ–ø—Ä–æ—Å</label>
                <textarea id="message" class="form-textarea" placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –∑–∞–ø—Ä–æ—Å" onfocus="scrollToField(this)"></textarea>
            </div>
        </div>
        
        <div class="button-container">
            <button class="button" onclick="submitForm()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            <button class="button back-button" onclick="goBack()">–ù–∞–∑–∞–¥</button>
        </div>
    </div>

    <!-- –ö–∞—Å—Ç–æ–º–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div class="overlay" id="overlay"></div>
    <div class="custom-alert" id="customAlert">
        <div class="custom-alert-icon" id="alertIcon">‚ö†Ô∏è</div>
        <div class="custom-alert-content" id="alertContent"></div>
        <button class="custom-alert-button" id="alertButton">OK</button>
    </div>

    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div id="loading" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); justify-content: center; align-items: center; z-index: 9999;">
        <div style="background-color: white; padding: 20px; border-radius: 10px; text-align: center;">
            <div style="border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 30px; height: 30px; margin: 0 auto; animation: spin 2s linear infinite;"></div>
            <p style="margin-top: 10px; color: #333;">–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        
        let serviceType = '';
        let telegramUsername = '';
        
        // –ö–æ–¥—ã —Å—Ç—Ä–∞–Ω –∏ –∏—Ö —Ñ–ª–∞–≥–∏
        const countryCodes = {
            '1': 'us', // –°–®–ê
            '7': 'ru', // –†–æ—Å—Å–∏—è
            '33': 'fr', // –§—Ä–∞–Ω—Ü–∏—è
            '34': 'es', // –ò—Å–ø–∞–Ω–∏—è
            '39': 'it', // –ò—Ç–∞–ª–∏—è
            '44': 'gb', // –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è
            '49': 'de', // –ì–µ—Ä–º–∞–Ω–∏—è
            '55': 'br', // –ë—Ä–∞–∑–∏–ª–∏—è
            '61': 'au', // –ê–≤—Å—Ç—Ä–∞–ª–∏—è
            '81': 'jp', // –Ø–ø–æ–Ω–∏—è
            '86': 'cn', // –ö–∏—Ç–∞–π
            '91': 'in', // –ò–Ω–¥–∏—è
            '971': 'ae', // –û–ê–≠
            '972': 'il', // –ò–∑—Ä–∞–∏–ª—å
            '966': 'sa', // –°–∞—É–¥–æ–≤—Å–∫–∞—è –ê—Ä–∞–≤–∏—è
            '90': 'tr', // –¢—É—Ä—Ü–∏—è
            '380': 'ua', // –£–∫—Ä–∞–∏–Ω–∞
            '375': 'by', // –ë–µ–ª–∞—Ä—É—Å—å
            '998': 'uz', // –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω
            '996': 'kg', // –ö–∏—Ä–≥–∏–∑–∏—è
            '995': 'ge', // –ì—Ä—É–∑–∏—è
            '994': 'az', // –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω
            '993': 'tm', // –¢—É—Ä–∫–º–µ–Ω–∏—Å—Ç–∞–Ω
            '992': 'tj', // –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω
            '374': 'am', // –ê—Ä–º–µ–Ω–∏—è
            '373': 'md', // –ú–æ–ª–¥–æ–≤–∞
            '370': 'lt', // –õ–∏—Ç–≤–∞
            '371': 'lv', // –õ–∞—Ç–≤–∏—è
            '372': 'ee', // –≠—Å—Ç–æ–Ω–∏—è
            '48': 'pl', // –ü–æ–ª—å—à–∞
            '420': 'cz', // –ß–µ—Ö–∏—è
            '421': 'sk', // –°–ª–æ–≤–∞–∫–∏—è
            '36': 'hu', // –í–µ–Ω–≥—Ä–∏—è
            '40': 'ro', // –†—É–º—ã–Ω–∏—è
            '359': 'bg', // –ë–æ–ª–≥–∞—Ä–∏—è
            '30': 'gr', // –ì—Ä–µ—Ü–∏—è
            '46': 'se', // –®–≤–µ—Ü–∏—è
            '47': 'no', // –ù–æ—Ä–≤–µ–≥–∏—è
            '358': 'fi', // –§–∏–Ω–ª—è–Ω–¥–∏—è
            '45': 'dk', // –î–∞–Ω–∏—è
            '31': 'nl', // –ù–∏–¥–µ—Ä–ª–∞–Ω–¥—ã
            '32': 'be', // –ë–µ–ª—å–≥–∏—è
            '41': 'ch', // –®–≤–µ–π—Ü–∞—Ä–∏—è
            '43': 'at', // –ê–≤—Å—Ç—Ä–∏—è
            '351': 'pt', // –ü–æ—Ä—Ç—É–≥–∞–ª–∏—è
            '353': 'ie', // –ò—Ä–ª–∞–Ω–¥–∏—è
            '352': 'lu', // –õ—é–∫—Å–µ–º–±—É—Ä–≥
            '356': 'mt', // –ú–∞–ª—å—Ç–∞
            '357': 'cy', // –ö–∏–ø—Ä
            '386': 'si', // –°–ª–æ–≤–µ–Ω–∏—è
            '385': 'hr', // –•–æ—Ä–≤–∞—Ç–∏—è
            '381': 'rs', // –°–µ—Ä–±–∏—è
            '355': 'al', // –ê–ª–±–∞–Ω–∏—è
            '389': 'mk', // –°–µ–≤–µ—Ä–Ω–∞—è –ú–∞–∫–µ–¥–æ–Ω–∏—è
            '387': 'ba', // –ë–æ—Å–Ω–∏—è –∏ –ì–µ—Ä—Ü–µ–≥–æ–≤–∏–Ω–∞
            '382': 'me', // –ß–µ—Ä–Ω–æ–≥–æ—Ä–∏—è
            '377': 'mc', // –ú–æ–Ω–∞–∫–æ
            '376': 'ad', // –ê–Ω–¥–æ—Ä—Ä–∞
            '378': 'sm', // –°–∞–Ω-–ú–∞—Ä–∏–Ω–æ
            '379': 'va', // –í–∞—Ç–∏–∫–∞–Ω
            '350': 'gi', // –ì–∏–±—Ä–∞–ª—Ç–∞—Ä
            '354': 'is', // –ò—Å–ª–∞–Ω–¥–∏—è
            '298': 'fo', // –§–∞—Ä–µ—Ä—Å–∫–∏–µ –æ—Å—Ç—Ä–æ–≤–∞
            '299': 'gl', // –ì—Ä–µ–Ω–ª–∞–Ω–¥–∏—è
            '213': 'dz', // –ê–ª–∂–∏—Ä
            '20': 'eg', // –ï–≥–∏–ø–µ—Ç
            '212': 'ma', // –ú–∞—Ä–æ–∫–∫–æ
            '216': 'tn', // –¢—É–Ω–∏—Å
            '218': 'ly', // –õ–∏–≤–∏—è
            '249': 'sd', // –°—É–¥–∞–Ω
            '251': 'et', // –≠—Ñ–∏–æ–ø–∏—è
            '254': 'ke', // –ö–µ–Ω–∏—è
            '255': 'tz', // –¢–∞–Ω–∑–∞–Ω–∏—è
            '256': 'ug', // –£–≥–∞–Ω–¥–∞
            '260': 'zm', // –ó–∞–º–±–∏—è
            '263': 'zw', // –ó–∏–º–±–∞–±–≤–µ
            '27': 'za', // –Æ–ê–†
            '234': 'ng', // –ù–∏–≥–µ—Ä–∏—è
            '233': 'gh', // –ì–∞–Ω–∞
            '225': 'ci', // –ö–æ—Ç-–¥'–ò–≤—É–∞—Ä
            '221': 'sn', // –°–µ–Ω–µ–≥–∞–ª
            '237': 'cm', // –ö–∞–º–µ—Ä—É–Ω
            '244': 'ao', // –ê–Ω–≥–æ–ª–∞
            '250': 'rw', // –†—É–∞–Ω–¥–∞
            '241': 'ga', // –ì–∞–±–æ–Ω
            '242': 'cg', // –ö–æ–Ω–≥–æ
            '243': 'cd', // –î–† –ö–æ–Ω–≥–æ
            '235': 'td', // –ß–∞–¥
            '236': 'cf', // –¶–ê–†
            '238': 'cv', // –ö–∞–±–æ-–í–µ—Ä–¥–µ
            '240': 'gq', // –≠–∫–≤–∞—Ç–æ—Ä–∏–∞–ª—å–Ω–∞—è –ì–≤–∏–Ω–µ—è
            '245': 'gw', // –ì–≤–∏–Ω–µ—è-–ë–∏—Å–∞—É
            '247': 'sh', // –û—Å—Ç—Ä–æ–≤ –°–≤—è—Ç–æ–π –ï–ª–µ–Ω—ã
            '248': 'sc', // –°–µ–π—à–µ–ª—å—Å–∫–∏–µ –æ—Å—Ç—Ä–æ–≤–∞
            '252': 'so', // –°–æ–º–∞–ª–∏
            '253': 'dj', // –î–∂–∏–±—É—Ç–∏
            '257': 'bi', // –ë—É—Ä—É–Ω–¥–∏
            '258': 'mz', // –ú–æ–∑–∞–º–±–∏–∫
            '261': 'mg', // –ú–∞–¥–∞–≥–∞—Å–∫–∞—Ä
            '262': 're', // –†–µ—é–Ω—å–æ–Ω
            '264': 'na', // –ù–∞–º–∏–±–∏—è
            '265': 'mw', // –ú–∞–ª–∞–≤–∏
            '266': 'ls', // –õ–µ—Å–æ—Ç–æ
            '267': 'bw', // –ë–æ—Ç—Å–≤–∞–Ω–∞
            '268': 'sz', // –°–≤–∞–∑–∏–ª–µ–Ω–¥
            '269': 'km', // –ö–æ–º–æ—Ä—Å–∫–∏–µ –æ—Å—Ç—Ä–æ–≤–∞
            '290': 'sh', // –û—Å—Ç—Ä–æ–≤ –°–≤—è—Ç–æ–π –ï–ª–µ–Ω—ã
            '291': 'er', // –≠—Ä–∏—Ç—Ä–µ—è
            '297': 'aw', // –ê—Ä—É–±–∞
            '501': 'bz', // –ë–µ–ª–∏–∑
            '502': 'gt', // –ì–≤–∞—Ç–µ–º–∞–ª–∞
            '503': 'sv', // –°–∞–ª—å–≤–∞–¥–æ—Ä
            '504': 'hn', // –ì–æ–Ω–¥—É—Ä–∞—Å
            '505': 'ni', // –ù–∏–∫–∞—Ä–∞–≥—É–∞
            '506': 'cr', // –ö–æ—Å—Ç–∞-–†–∏–∫–∞
            '507': 'pa', // –ü–∞–Ω–∞–º–∞
            '509': 'ht', // –ì–∞–∏—Ç–∏
            '51': 'pe', // –ü–µ—Ä—É
            '52': 'mx', // –ú–µ–∫—Å–∏–∫–∞
            '53': 'cu', // –ö—É–±–∞
            '54': 'ar', // –ê—Ä–≥–µ–Ω—Ç–∏–Ω–∞
            '56': 'cl', // –ß–∏–ª–∏
            '57': 'co', // –ö–æ–ª—É–º–±–∏—è
            '58': 've', // –í–µ–Ω–µ—Å—É—ç–ª–∞
            '591': 'bo', // –ë–æ–ª–∏–≤–∏—è
            '592': 'gy', // –ì–∞–π–∞–Ω–∞
            '593': 'ec', // –≠–∫–≤–∞–¥–æ—Ä
            '595': 'py', // –ü–∞—Ä–∞–≥–≤–∞–π
            '597': 'sr', // –°—É—Ä–∏–Ω–∞–º
            '598': 'uy', // –£—Ä—É–≥–≤–∞–π
            '599': 'an', // –ù–∏–¥–µ—Ä–ª–∞–Ω–¥—Å–∫–∏–µ –ê–Ω—Ç–∏–ª—å—Å–∫–∏–µ –æ—Å—Ç—Ä–æ–≤–∞
            '60': 'my', // –ú–∞–ª–∞–π–∑–∏—è
            '62': 'id', // –ò–Ω–¥–æ–Ω–µ–∑–∏—è
            '63': 'ph', // –§–∏–ª–∏–ø–ø–∏–Ω—ã
            '64': 'nz', // –ù–æ–≤–∞—è –ó–µ–ª–∞–Ω–¥–∏—è
            '65': 'sg', // –°–∏–Ω–≥–∞–ø—É—Ä
            '66': 'th', // –¢–∞–∏–ª–∞–Ω–¥
            '673': 'bn', // –ë—Ä—É–Ω–µ–π
            '674': 'nr', // –ù–∞—É—Ä—É
            '675': 'pg', // –ü–∞–ø—É–∞-–ù–æ–≤–∞—è –ì–≤–∏–Ω–µ—è
            '676': 'to', // –¢–æ–Ω–≥–∞
            '677': 'sb', // –°–æ–ª–æ–º–æ–Ω–æ–≤—ã –æ—Å—Ç—Ä–æ–≤–∞
            '678': 'vu', // –í–∞–Ω—É–∞—Ç—É
            '679': 'fj', // –§–∏–¥–∂–∏
            '680': 'pw', // –ü–∞–ª–∞—É
            '681': 'wf', // –£–æ–ª–ª–∏—Å –∏ –§—É—Ç—É–Ω–∞
            '682': 'ck', // –û—Å—Ç—Ä–æ–≤–∞ –ö—É–∫–∞
            '683': 'nu', // –ù–∏—É—ç
            '684': 'as', // –ê–º–µ—Ä–∏–∫–∞–Ω—Å–∫–æ–µ –°–∞–º–æ–∞
            '685': 'ws', // –°–∞–º–æ–∞
            '686': 'ki', // –ö–∏—Ä–∏–±–∞—Ç–∏
            '687': 'nc', // –ù–æ–≤–∞—è –ö–∞–ª–µ–¥–æ–Ω–∏—è
            '688': 'tv', // –¢—É–≤–∞–ª—É
            '689': 'pf', // –§—Ä–∞–Ω—Ü—É–∑—Å–∫–∞—è –ü–æ–ª–∏–Ω–µ–∑–∏—è
            '690': 'tk', // –¢–æ–∫–µ–ª–∞—É
            '691': 'fm', // –ú–∏–∫—Ä–æ–Ω–µ–∑–∏—è
            '692': 'mh', // –ú–∞—Ä—à–∞–ª–ª–æ–≤—ã –æ—Å—Ç—Ä–æ–≤–∞
            '850': 'kp', // –°–µ–≤–µ—Ä–Ω–∞—è –ö–æ—Ä–µ—è
            '852': 'hk', // –ì–æ–Ω–∫–æ–Ω–≥
            '853': 'mo', // –ú–∞–∫–∞–æ
            '855': 'kh', // –ö–∞–º–±–æ–¥–∂–∞
            '856': 'la', // –õ–∞–æ—Å
            '880': 'bd', // –ë–∞–Ω–≥–ª–∞–¥–µ—à
            '886': 'tw', // –¢–∞–π–≤–∞–Ω—å
            '960': 'mv', // –ú–∞–ª—å–¥–∏–≤—ã
            '961': 'lb', // –õ–∏–≤–∞–Ω
            '962': 'jo', // –ò–æ—Ä–¥–∞–Ω–∏—è
            '963': 'sy', // –°–∏—Ä–∏—è
            '964': 'iq', // –ò—Ä–∞–∫
            '965': 'kw', // –ö—É–≤–µ–π—Ç
            '967': 'ye', // –ô–µ–º–µ–Ω
            '968': 'om', // –û–º–∞–Ω
            '970': 'ps', // –ü–∞–ª–µ—Å—Ç–∏–Ω–∞
            '973': 'bh', // –ë–∞—Ö—Ä–µ–π–Ω
            '974': 'qa', // –ö–∞—Ç–∞—Ä
            '975': 'bt', // –ë—É—Ç–∞–Ω
            '976': 'mn', // –ú–æ–Ω–≥–æ–ª–∏—è
            '977': 'np', // –ù–µ–ø–∞–ª
            '98': 'ir', // –ò—Ä–∞–Ω
            '992': 'tj', // –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω
            '994': 'az', // –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω
            '995': 'ge', // –ì—Ä—É–∑–∏—è
            '996': 'kg', // –ö–∏—Ä–≥–∏–∑–∏—è
            '998': 'uz'  // –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω
        };
        
        // –ü–æ–ª—É—á–∞–µ–º —Ç–∏–ø —É—Å–ª—É–≥–∏ –∏–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
        function getServiceFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('service') || '';
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            serviceType = getServiceFromUrl();
            
            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
            if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
                telegramUsername = tg.initDataUnsafe.user.username || '';
                console.log('Telegram username:', telegramUsername);
            }
            
            // –ï—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–ø–æ—Ç–µ–∫–∏ –≤ localStorage, –ø–æ–ª—É—á–∞–µ–º –∏—Ö
            if (serviceType === 'mortgage') {
                const mortgageData = JSON.parse(localStorage.getItem('mortgage_data') || '{}');
                console.log('Mortgage data:', mortgageData);
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–≤–æ–¥–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω—ã
            document.getElementById('whatsapp').addEventListener('input', function() {
                detectCountry('whatsapp');
            });
        };
        
        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã –ø–æ –∫–æ–¥—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞
        function detectCountry(inputId) {
            const phoneInput = document.getElementById(inputId);
            const countryFlag = document.getElementById(inputId + '-flag');
            
            let phone = phoneInput.value.replace(/\D/g, '');
            
            if (phone.startsWith('00')) {
                phone = phone.substring(2);
            } else if (phone.startsWith('+')) {
                phone = phone.substring(1);
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–¥—ã —Å—Ç—Ä–∞–Ω –æ—Ç —Å–∞–º—ã—Ö –¥–ª–∏–Ω–Ω—ã—Ö –¥–æ –∫–æ—Ä–æ—Ç–∫–∏—Ö
            let countryCode = '';
            let countryISO = '';
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –∫–æ–¥—ã –ø–æ –¥–ª–∏–Ω–µ (–æ—Ç –¥–ª–∏–Ω–Ω—ã—Ö –∫ –∫–æ—Ä–æ—Ç–∫–∏–º)
            const sortedCodes = Object.keys(countryCodes).sort((a, b) => b.length - a.length);
            
            for (const code of sortedCodes) {
                if (phone.startsWith(code)) {
                    countryCode = code;
                    countryISO = countryCodes[code];
                    break;
                }
            }
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è ISO –∫–æ–¥–∞ —Å—Ç—Ä–∞–Ω—ã –≤ —ç–º–æ–¥–∑–∏ —Ñ–ª–∞–≥–∞
            function getCountryFlagEmoji(countryCode) {
                const codePoints = countryCode
                    .toUpperCase()
                    .split('')
                    .map(char => 127397 + char.charCodeAt());
                return String.fromCodePoint(...codePoints);
            }
            
            if (countryISO) {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º —ç–º–æ–¥–∑–∏ —Ñ–ª–∞–≥–∞ –≤–º–µ—Å—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                const flagEmoji = getCountryFlagEmoji(countryISO);
                countryFlag.textContent = flagEmoji;
                countryFlag.style.display = 'block';
                console.log(`–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ñ–ª–∞–≥ –¥–ª—è —Å—Ç—Ä–∞–Ω—ã: ${countryISO} (${flagEmoji})`);
            } else {
                countryFlag.textContent = '';
                countryFlag.style.display = 'none';
                console.log('–°—Ç—Ä–∞–Ω–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞');
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram –±–æ—Ç–∞
        async function sendToTelegramBot(data) {
            try {
                const BOT_TOKEN = '7671516191:AAE_MnEADtr6MY7wRqIvu8DHdGaL9bJAlbk';
                // –ú–∞—Å—Å–∏–≤ ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
                const ADMIN_IDS = ['5467140250', '1621625897'];
                
                // –ü–æ–ª—É—á–∞–µ–º ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram, –µ—Å–ª–∏ –æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω
                let telegramUserId = '';
                if (tg.initDataUnsafe && tg.initDataUnsafe.user && tg.initDataUnsafe.user.id) {
                    telegramUserId = tg.initDataUnsafe.user.id.toString();
                    data.telegramUserId = telegramUserId; // –î–æ–±–∞–≤–ª—è–µ–º ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥–∞–Ω–Ω—ã–µ
                }
                
                console.log('–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º:', ADMIN_IDS);
                
                // –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫—Ä–∞—Å–∏–≤—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
                let messageText = `üìã *–ù–û–í–ê–Ø –ó–ê–Ø–í–ö–ê* üìã\n\n`;
                messageText += `üîπ *–£—Å–ª—É–≥–∞:* ${getServiceName(data.service)}\n`;
                messageText += `üë§ *–ò–º—è:* ${data.name}\n`;
                messageText += `üì± *WhatsApp:* ${data.whatsapp}\n`;
                messageText += `üìß *Email:* ${data.email}\n`;
                
                // –î–æ–±–∞–≤–ª—è–µ–º Telegram username, –µ—Å–ª–∏ –æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω
                if (data.telegramUsername) {
                    messageText += `üí¨ *Telegram:* @${data.telegramUsername}\n`;
                }
                
                if (data.message && data.message.trim()) {
                    messageText += `\nüìù *–°–æ–æ–±—â–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞:*\n_${data.message.trim()}_\n`;
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –∏–ø–æ—Ç–µ–∫–∏, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
                if (data.service === 'mortgage' && data.budget) {
                    messageText += `\nüè† *–î–ê–ù–ù–´–ï –ü–û –ò–ü–û–¢–ï–ö–ï:*\n`;
                    messageText += `üí∞ *–ë—é–¥–∂–µ—Ç:* ${new Intl.NumberFormat('ru-RU').format(data.budget)} $\n`;
                    messageText += `üè¢ *–°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏:* ${new Intl.NumberFormat('ru-RU').format(data.propertyCost)} $\n`;
                    messageText += `üë®‚Äçüë©‚Äçüëß *–í–æ–∑—Ä–∞—Å—Ç:* ${data.age} –ª–µ—Ç\n`;
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è
                const now = new Date();
                const dateOptions = { day: '2-digit', month: '2-digit', year: 'numeric' };
                const timeOptions = { hour: '2-digit', minute: '2-digit' };
                const dateStr = now.toLocaleDateString('ru-RU', dateOptions);
                const timeStr = now.toLocaleTimeString('ru-RU', timeOptions);
                
                messageText += `\nüìÖ *–î–∞—Ç–∞:* ${dateStr}\n‚è∞ *–í—Ä–µ–º—è:* ${timeStr}`;
                
                console.log('–ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:', messageText);
                
                // –°–æ–∑–¥–∞–µ–º —Å–∫—Ä—ã—Ç—ã–π div –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
                const container = document.createElement('div');
                container.style.display = 'none';
                document.body.appendChild(container);
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º —á–µ—Ä–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                let successCount = 0;
                for (const adminId of ADMIN_IDS) {
                    try {
                        const encodedText = encodeURIComponent(messageText);
                        const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${adminId}&text=${encodedText}&parse_mode=Markdown&disable_web_page_preview=true`;
                        
                        // –°–æ–∑–¥–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
                        const img = document.createElement('img');
                        img.style.display = 'none';
                        img.src = url;
                        container.appendChild(img);
                        
                        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
                        img.onload = function() {
                            successCount++;
                            console.log(`–°–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∞–¥–º–∏–Ω—É ${adminId}`);
                        };
                        
                        console.log(`–ó–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è –∞–¥–º–∏–Ω—É ${adminId} —Å–æ–∑–¥–∞–Ω —á–µ—Ä–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ`);
                    } catch (e) {
                        console.error(`–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –∞–¥–º–∏–Ω–∞ ${adminId}:`, e);
                    }
                }
                
                // –£–¥–∞–ª—è–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                setTimeout(() => {
                    if (container && container.parentNode) {
                        document.body.removeChild(container);
                    }
                }, 5000);
                
                // –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º true
                return true;
            } catch (error) {
                console.error("–ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ sendToTelegramBot:", error);
                // –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º true, –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ
                return true;
            }
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —É—Å–ª—É–≥–∏ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è
        function getServiceName(serviceCode) {
            const services = {
                'mortgage': '–ò–ø–æ—Ç–µ–∫–∞',
                'visa': '–í–∏–∑–∞',
                'bank': '–°—á–µ—Ç –≤ –±–∞–Ω–∫–µ',
                'lawyer': '–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —É—Å–ª—É–≥–∏',
                'company': '–û—Ç–∫—Ä—ã—Ç–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏',
                'consultation': '–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è'
            };
            return services[serviceCode] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —É—Å–ª—É–≥–∞';
        }
        
        async function submitForm() {
            const name = document.getElementById('name').value;
            const whatsapp = document.getElementById('whatsapp').value;
            const email = document.getElementById('email-contact').value;
            const message = document.getElementById('message').value;
            
            if (!name) {
                showCustomAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è', 'warning');
                return;
            }
            
            if (!whatsapp) {
                showCustomAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä WhatsApp', 'warning');
                return;
            }
            
            if (!email) {
                showCustomAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ email –¥–ª—è —Å–≤—è–∑–∏', 'warning');
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ email
            if (email && !isValidEmail(email)) {
                showCustomAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email', 'warning');
                return;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            document.getElementById('loading').style.display = 'flex';
            
            try {
                // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
                const data = {
                    service: serviceType || 'consultation',
                    name: name,
                    whatsapp: whatsapp,
                    email: email,
                    message: message,
                    telegramUsername: telegramUsername,
                    timestamp: Date.now()
                };
                
                // –ï—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–ø–æ—Ç–µ–∫–∏, –¥–æ–±–∞–≤–ª—è–µ–º –∏—Ö
                if (serviceType === 'mortgage') {
                    const mortgageData = JSON.parse(localStorage.getItem('mortgage_data') || '{}');
                    Object.assign(data, mortgageData);
                    
                    // –û—á–∏—â–∞–µ–º localStorage
                    localStorage.removeItem('mortgage_data');
                }
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ Telegram –±–æ—Ç–∞
                await sendToTelegramBot(data);
                
                // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                document.getElementById('loading').style.display = 'none';
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ
                showCustomAlert('–í–∞—à–∞ –∑–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.', 'success');
                
                // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
                document.getElementById('name').value = '';
                document.getElementById('whatsapp').value = '';
                document.getElementById('email-contact').value = '';
                document.getElementById('message').value = '';
                
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–º–µ—Å—Ç–æ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
                setTimeout(() => {
                    const currentPath = window.location.pathname;
                    const basePath = currentPath.substring(0, currentPath.lastIndexOf('/'));
                    window.location.href = `${basePath}/index.html`;
                }, 2000);
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã:", error);
                
                // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                document.getElementById('loading').style.display = 'none';
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
                showCustomAlert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞—è–≤–∫–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.', 'error');
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ email
        function isValidEmail(email) {
            const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(String(email).toLowerCase());
        }
        
        async function goBack() {
            try {
                // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
                const name = document.getElementById('name').value;
                const whatsapp = document.getElementById('whatsapp').value;
                const email = document.getElementById('email-contact').value;
                const message = document.getElementById('message').value;
                
                // –ï—Å–ª–∏ –µ—Å—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
                if (name || whatsapp || email || message) {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                    document.getElementById('loading').style.display = 'flex';
                    
                    // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
                    const data = {
                        service: serviceType || 'consultation',
                        name: name || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',
                        whatsapp: whatsapp || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',
                        email: email || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',
                        message: message || '',
                        telegramUsername: telegramUsername,
                        timestamp: Date.now(),
                        note: '–î–∞–Ω–Ω—ã–µ –∏–∑ –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–π —Ñ–æ—Ä–º—ã (–Ω–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ –ù–∞–∑–∞–¥)'
                    };
                    
                    // –ï—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–ø–æ—Ç–µ–∫–∏, –¥–æ–±–∞–≤–ª—è–µ–º –∏—Ö
                    if (serviceType === 'mortgage') {
                        const mortgageData = JSON.parse(localStorage.getItem('mortgage_data') || '{}');
                        Object.assign(data, mortgageData);
                    }
                    
                    try {
                        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ Telegram –±–æ—Ç–∞
                        await sendToTelegramBot(data);
                        console.log("–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ");
                    } catch (e) {
                        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ:", e);
                    } finally {
                        // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                        document.getElementById('loading').style.display = 'none';
                        
                        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                        window.history.back();
                    }
                } else {
                    // –ï—Å–ª–∏ —Ñ–æ—Ä–º–∞ –ø—É—Å—Ç–∞—è, –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è
                    window.history.back();
                }
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ goBack:", error);
                // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                document.getElementById('loading').style.display = 'none';
                // –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è
                window.history.back();
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞
        function scrollToField(element) {
            // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
            setTimeout(() => {
                // –ü–æ–ª—É—á–∞–µ–º –ø–æ–∑–∏—Ü–∏—é —ç–ª–µ–º–µ–Ω—Ç–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –≤–µ—Ä—Ö–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                const rect = element.getBoundingClientRect();
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                const offsetTop = rect.top + scrollTop;
                
                // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ç–∞–∫, —á—Ç–æ–±—ã –ø–æ–ª–µ –≤–≤–æ–¥–∞ –±—ã–ª–æ –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞
                // –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
                window.scrollTo({
                    top: offsetTop - 100, // –û—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
                    behavior: 'smooth'
                });
            }, 300);
        }
        
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏
        document.querySelectorAll('.button').forEach(button => {
            button.addEventListener('touchstart', function() {
                // –°–Ω–∏–º–∞–µ–º —Ñ–æ–∫—É—Å —Å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
                document.activeElement.blur();
            });
        });
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showCustomAlert(message, type = 'info') {
            const overlay = document.getElementById('overlay');
            const customAlert = document.getElementById('customAlert');
            const alertContent = document.getElementById('alertContent');
            const alertButton = document.getElementById('alertButton');
            const alertIcon = document.getElementById('alertIcon');
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∫–æ–Ω–∫—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            if (type === 'success') {
                alertIcon.textContent = '‚úÖ';
            } else if (type === 'error') {
                alertIcon.textContent = '‚ùå';
            } else if (type === 'warning') {
                alertIcon.textContent = '‚ö†Ô∏è';
            } else {
                alertIcon.textContent = '‚ÑπÔ∏è';
            }
            
            alertContent.textContent = message;
            overlay.style.display = 'block';
            customAlert.style.display = 'block';
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
            overlay.style.animation = 'none';
            customAlert.style.animation = 'none';
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
            setTimeout(() => {
                overlay.style.animation = 'fadeIn 0.3s ease-out forwards';
                customAlert.style.animation = 'zoomIn 0.3s ease-out forwards';
            }, 10);
            
            alertButton.onclick = function() {
                overlay.style.opacity = '0';
                customAlert.style.opacity = '0';
                
                setTimeout(() => {
                    overlay.style.display = 'none';
                    customAlert.style.display = 'none';
                }, 300);
            };
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        window.addEventListener('beforeunload', function(event) {
            try {
                // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
                const name = document.getElementById('name').value;
                const whatsapp = document.getElementById('whatsapp').value;
                const email = document.getElementById('email-contact').value;
                const message = document.getElementById('message').value;
                
                // –ï—Å–ª–∏ –µ—Å—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
                if (name || whatsapp || email || message) {
                    // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
                    const data = {
                        service: serviceType || 'consultation',
                        name: name || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',
                        whatsapp: whatsapp || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',
                        email: email || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',
                        message: message || '',
                        telegramUsername: telegramUsername,
                        timestamp: Date.now(),
                        note: '–î–∞–Ω–Ω—ã–µ –∏–∑ –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è'
                    };
                    
                    // –ï—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–ø–æ—Ç–µ–∫–∏, –¥–æ–±–∞–≤–ª—è–µ–º –∏—Ö
                    if (serviceType === 'mortgage') {
                        const mortgageData = JSON.parse(localStorage.getItem('mortgage_data') || '{}');
                        Object.assign(data, mortgageData);
                    }
                    
                    // –ü–æ–ª—É—á–∞–µ–º ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram, –µ—Å–ª–∏ –æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω
                    let telegramUserId = '';
                    if (tg.initDataUnsafe && tg.initDataUnsafe.user && tg.initDataUnsafe.user.id) {
                        telegramUserId = tg.initDataUnsafe.user.id.toString();
                        data.telegramUserId = telegramUserId; // –î–æ–±–∞–≤–ª—è–µ–º ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥–∞–Ω–Ω—ã–µ
                    }
                    
                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                    try {
                        const encodedText = encodeURIComponent(JSON.stringify(data));
                        const img = new Image();
                        img.src = `https://api.telegram.org/bot7671516191:AAE_MnEADtr6MY7wRqIvu8DHdGaL9bJAlbk/sendMessage?chat_id=5467140250&text=${encodedText}&parse_mode=Markdown`;
                    } catch (e) {
                        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö:", e);
                    }
                }
                
                // –ù–µ –±–ª–æ–∫–∏—Ä—É–µ–º –∑–∞–∫—Ä—ã—Ç–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                return null;
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:", error);
                return null;
            }
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥" –≤ –±—Ä–∞—É–∑–µ—Ä–µ
        window.addEventListener('popstate', function(event) {
            try {
                // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
                const name = document.getElementById('name').value;
                const whatsapp = document.getElementById('whatsapp').value;
                const email = document.getElementById('email-contact').value;
                const message = document.getElementById('message').value;
                
                // –ï—Å–ª–∏ –µ—Å—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
                if (name || whatsapp || email || message) {
                    // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
                    const data = {
                        service: serviceType || 'consultation',
                        name: name || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',
                        whatsapp: whatsapp || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',
                        email: email || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',
                        message: message || '',
                        telegramUsername: telegramUsername,
                        timestamp: Date.now(),
                        note: '–î–∞–Ω–Ω—ã–µ –∏–∑ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ –ù–∞–∑–∞–¥ –≤ –±—Ä–∞—É–∑–µ—Ä–µ'
                    };
                    
                    // –ï—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–ø–æ—Ç–µ–∫–∏, –¥–æ–±–∞–≤–ª—è–µ–º –∏—Ö
                    if (serviceType === 'mortgage') {
                        const mortgageData = JSON.parse(localStorage.getItem('mortgage_data') || '{}');
                        Object.assign(data, mortgageData);
                    }
                    
                    // –ü–æ–ª—É—á–∞–µ–º ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram, –µ—Å–ª–∏ –æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω
                    let telegramUserId = '';
                    if (tg.initDataUnsafe && tg.initDataUnsafe.user && tg.initDataUnsafe.user.id) {
                        telegramUserId = tg.initDataUnsafe.user.id.toString();
                        data.telegramUserId = telegramUserId; // –î–æ–±–∞–≤–ª—è–µ–º ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥–∞–Ω–Ω—ã–µ
                    }
                    
                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                    try {
                        const encodedText = encodeURIComponent(JSON.stringify(data));
                        const img = new Image();
                        img.src = `https://api.telegram.org/bot7671516191:AAE_MnEADtr6MY7wRqIvu8DHdGaL9bJAlbk/sendMessage?chat_id=5467140250&text=${encodedText}&parse_mode=Markdown`;
                    } catch (e) {
                        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö:", e);
                    }
                }
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ '–ù–∞–∑–∞–¥':", error);
            }
        });
    </script>
</body>
</html> 